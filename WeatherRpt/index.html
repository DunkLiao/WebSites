<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å„ç¸£å¸‚å¤©æ°£é å ±</title>
    <link rel="icon" type="image/png" href="./icon-v2.png">
    <link rel="apple-touch-icon" href="./icon-v2.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon-v2.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* å°ç£æ­·å²é¢¨æ ¼é…è‰² */
            --tw-brick: #B85C50;
            /* ç´…ç£šè‰² */
            --tw-tile: #4A5D5E;
            /* é’ç“¦è‰² */
            --tw-wood: #8B6F47;
            /* æœ¨ç´‹è‰² */
            --tw-beige: #F5EBD8;
            /* ç±³ç™½è‰² */
            --tw-cream: #FFF9E6;
            /* å¥¶æ²¹è‰² */
            --tw-gold: #D4A574;
            /* é‡‘é»ƒè‰² */
            --tw-jade: #6B9080;
            /* é’ç‰è‰² */
            --tw-dark: #3E2723;
            /* æ·±æ£•è‰² */
            --tw-border: #D4C4B0;
            /* é‚Šæ¡†è‰² */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: var(--tw-jade);
            /* å‚³çµ±å»ºç¯‰ç´‹ç†èƒŒæ™¯ */
            background-image:
                repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(139, 111, 71, 0.1) 20px, rgba(139, 111, 71, 0.1) 40px);
            min-height: 100vh;
            color: var(--tw-dark);
            /* é˜²æ­¢ iOS å·¦å³æ»‘å‹• */
            overflow-x: hidden;
            padding-bottom: 20px;
        }

        /* é ‚éƒ¨ç‹€æ…‹åˆ— */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .location-pill {
            background: var(--tw-gold);
            color: var(--tw-dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 900;
            font-size: 1.1rem;
            transform: rotate(-2deg);
            border: 2px solid var(--tw-cream);
            box-shadow: 2px 2px 0 rgba(62, 39, 35, 0.2);
        }

        .update-pill {
            font-size: 0.8rem;
            color: white;
            background: rgba(0, 0, 0, 0.2);
            padding: 4px 10px;
            border-radius: 12px;
        }

        /* ç¸£å¸‚é¸å–®æ¨£å¼ */
        .city-selector {
            background: var(--tw-cream);
            color: var(--tw-dark);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1rem;
            border: 2px solid var(--tw-brick);
            box-shadow: 2px 2px 0 rgba(184, 92, 80, 0.2);
            cursor: pointer;
            font-family: 'Zen Maru Gothic', sans-serif;
            outline: none;
        }

        .city-selector:focus {
            border-color: var(--tw-wood);
        }

        .container {
            padding: 20px;
            max-width: 600px;
            /* é™åˆ¶åœ¨å¤§æ‰‹æ©Ÿå¯¬åº¦ */
            margin: 0 auto;
        }

        /* === æ ¸å¿ƒï¼šä»Šæ—¥ç„¦é»å¡ç‰‡ === */
        .hero-card {
            background: var(--tw-cream);
            border-radius: 35px;
            padding: 30px 25px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(62, 39, 35, 0.15);
            border: 4px solid var(--tw-gold);
            margin-bottom: 25px;
            position: relative;
        }

        /* æ™‚æ®µæ¨™ç±¤ */
        .hero-period {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--tw-brick);
            color: var(--tw-cream);
            padding: 5px 20px;
            border-radius: 20px;
            font-weight: bold;
            border: 3px solid var(--tw-gold);
            box-shadow: 0 4px 0 rgba(62, 39, 35, 0.2);
        }

        .hero-temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .hero-icon {
            font-size: 5rem;
            filter: drop-shadow(0 4px 0 rgba(0, 0, 0, 0.1));
            animation: bounce 3s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .hero-temp {
            font-size: 4.5rem;
            font-weight: 900;
            color: var(--tw-brick);
            line-height: 1;
        }

        .hero-desc {
            font-size: 1.5rem;
            color: var(--tw-wood);
            margin-bottom: 20px;
            font-weight: bold;
        }

        /* === ä¸Šç­æ—æœ€æ„›çš„ï¼šå¿«é€Ÿå»ºè­°å€ === */
        .advice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #E0D8C0;
        }

        .advice-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.5);
            padding: 10px;
            border-radius: 20px;
        }

        .advice-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .advice-text {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--tw-dark);
            margin: 5px 0;
            line-height: 1.2;
        }

        /* === ç¨å¾Œé å ±ï¼šæ©«å‘æ»‘å‹•å€ === */
        .section-title {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 15px;
            margin-left: 10px;
            font-weight: 900;
            text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.1);
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding-bottom: 10px;
            /* éš±è—æ»¾å‹•æ¢ä½†ä¿ç•™åŠŸèƒ½ */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .mini-card {
            min-width: 140px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 25px;
            padding: 20px 15px;
            text-align: center;
            border: 3px solid white;
            flex-shrink: 0;
            /* é˜²æ­¢è¢«æ“ å£“ */
        }

        .mini-time {
            background: var(--tw-jade);
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .mini-icon {
            font-size: 2.5rem;
            margin: 5px 0;
        }

        .mini-temp {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--tw-dark);
        }

        /* Loading ç•«é¢ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--ac-green);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }
    </style>
</head>

<body>
    <div id="loading" class="loading-screen">
        <div style="font-size: 4rem; animation: bounce 2s infinite;">â˜ï¸</div>
        <p style="color: white; font-weight: bold; margin-top: 20px;">æ­£åœ¨è§€æ¸¬é›²çš„æµå‹•...</p>
    </div>
    <div class="status-bar">
        <div class="location-pill" id="locationDisplay">ğŸ“ æ–°åŒ—å¸‚</div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <span style="font-size:0.95rem; color:#6b5b4b; font-weight:bold; margin-bottom:2px;">è«‹é¸æ“‡ç¸£å¸‚æŸ¥çœ‹å¤©æ°£</span>
            <select id="citySelector" class="city-selector">
                <option value="keelung">åŸºéš†å¸‚</option>
                <option value="taipei">è‡ºåŒ—å¸‚</option>
                <option value="newtaipei" selected>æ–°åŒ—å¸‚</option>
                <option value="yilan">å®œè˜­ç¸£</option>
                <option value="taoyuan">æ¡ƒåœ’å¸‚</option>
                <option value="hsinchucity">æ–°ç«¹å¸‚</option>
                <option value="hsinchucounty">æ–°ç«¹ç¸£</option>
                <option value="miaoli">è‹—æ —ç¸£</option>
                <option value="taichung">è‡ºä¸­å¸‚</option>
                <option value="changhua">å½°åŒ–ç¸£</option>
                <option value="nantou">å—æŠ•ç¸£</option>
                <option value="yunlin">é›²æ—ç¸£</option>
                <option value="chiayicity">å˜‰ç¾©å¸‚</option>
                <option value="chiayicounty">å˜‰ç¾©ç¸£</option>
                <option value="tainan">è‡ºå—å¸‚</option>
                <option value="kaohsiung">é«˜é›„å¸‚</option>
                <option value="pingtung">å±æ±ç¸£</option>
                <option value="hualien">èŠ±è“®ç¸£</option>
                <option value="taitung">è‡ºæ±ç¸£</option>
                <option value="penghu">æ¾æ¹–ç¸£</option>
                <option value="kinmen">é‡‘é–€ç¸£</option>
                <option value="lienchiang">é€£æ±Ÿç¸£</option>
            </select>
        </div>
        <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>


    <div class="container" id="mainContent" style="display: none;">
        <div id="cityLandmark" style="margin-bottom: 24px;"></div>
        <div id="heroCard"></div>
        <h3 class="section-title">ç¨å¾Œé å ±</h3>
        <div class="scroll-container" id="futureForecasts"></div>
    </div>

    <script>
        // å„ç¸£å¸‚å¤è¹ŸSVGèˆ‡æ•…äº‹ï¼ˆå„ªåŒ–ç‰ˆï¼‰
        const cityLandmarks = {
            keelung: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><circle cx="40" cy="35" r="22" fill="#D4A574" stroke="#3E2723" stroke-width="2"/><ellipse cx="40" cy="65" rx="28" ry="10" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="35" y="30" width="10" height="15" fill="#B85C50" rx="2"/><circle cx="40" cy="28" r="6" fill="#F5EBD8" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "åŸºéš†ä¸­æ­£å…¬åœ’ä¸»æ™®å£‡",
                story: "ä¸»æ™®å£‡æ˜¯åŸºéš†ä¸­å…ƒç¥­çš„æ ¸å¿ƒï¼Œè¦‹è­‰åŸºéš†å¤šå…ƒæ—ç¾¤èåˆèˆ‡å’Œå¹³ç¥ˆç¦çš„æ­·å²ã€‚"
            },
            taipei: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="15" width="30" height="50" fill="#B85C50" stroke="#3E2723" stroke-width="2" rx="3"/><rect x="20" y="60" width="40" height="8" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,5 55,15 25,15" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="33" y="25" width="14" height="18" fill="#3E2723" opacity="0.3"/></svg>`,
                title: "å°åŒ—åŸé–€ï¼ˆåŒ—é–€ï¼‰",
                story: "åŒ—é–€ï¼Œå…¨åæ‰¿æ©é–€ï¼Œå»ºæ–¼æ¸…æœï¼Œæ˜¯å°åŒ—åƒ…å­˜çš„å¤åŸé–€ã€‚å®ƒè¦‹è­‰äº†å°åŒ—åŸçš„èˆˆè¡°èˆ‡ç¾ä»£åŒ–ï¼Œæ˜¯å°åŒ—é‡è¦çš„æ­·å²åœ°æ¨™ã€‚"
            },
            newtaipei: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><ellipse cx="40" cy="55" rx="28" ry="18" fill="#6B9080" stroke="#3E2723" stroke-width="2"/><rect x="28" y="30" width="24" height="25" fill="#8B6F47" stroke="#3E2723" stroke-width="2" rx="2"/><polygon points="40,18 52,30 28,30" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><circle cx="35" cy="40" r="3" fill="#D4A574"/><circle cx="45" cy="40" r="3" fill="#D4A574"/></svg>`,
                title: "æ—æœ¬æºåœ’é‚¸ï¼ˆæ¿æ©‹æ—å®¶èŠ±åœ’ï¼‰",
                story: "æ—æœ¬æºåœ’é‚¸æ˜¯å°ç£ç¾å­˜æœ€å®Œæ•´çš„åœ’æ—å»ºç¯‰ï¼Œèåˆä¸­è¥¿é¢¨æ ¼ï¼Œè¦‹è­‰æ¿æ©‹æ—å®¶èˆˆç››èˆ‡å°ç£åœ’æ—æ–‡åŒ–çš„ç™¼å±•ã€‚"
            },
            yilan: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="35" width="30" height="30" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,15 58,35 22,35" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="35" y="45" width="10" height="15" fill="#3E2723" opacity="0.3"/><line x1="25" y1="50" x2="55" y2="50" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "å®œè˜­è¨­æ²»ç´€å¿µé¤¨",
                story: "åŸç‚ºå®œè˜­å»³é•·å®˜é‚¸ï¼Œè¦‹è­‰å®œè˜­è¨­æ²»èˆ‡åœ°æ–¹ç™¼å±•ï¼Œæ˜¯æ—¥æ²»æ™‚æœŸæœ¨é€ å®˜èˆä»£è¡¨ã€‚"
            },
            taoyuan: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="20" y="40" width="40" height="25" fill="#D4A574" stroke="#3E2723" stroke-width="2" rx="3"/><path d="M 25 40 Q 40 25 55 40" fill="none" stroke="#3E2723" stroke-width="2.5"/><circle cx="30" cy="52" r="4" fill="#8B6F47"/><circle cx="50" cy="52" r="4" fill="#8B6F47"/><rect x="38" y="48" width="4" height="12" fill="#3E2723"/></svg>`,
                title: "å¤§æºªè€è¡—æ‹±é–€",
                story: "å¤§æºªè€è¡—ä»¥å·´æ´›å…‹å¼æ‹±é–€èåï¼Œè¦‹è­‰æ¡ƒåœ’å¤§æºªçš„ç¹æ¦®èˆ‡æœ¨è—ç™¼å±•ã€‚"
            },
            hsinchucity: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="22" y="35" width="36" height="30" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="40,18 58,35 22,35" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="35" y="45" width="10" height="15" fill="#D4A574" stroke="#3E2723" stroke-width="1.5"/><circle cx="40" cy="27" r="5" fill="#F5EBD8" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "æ–°ç«¹åŸéšå»Ÿ",
                story: "æ–°ç«¹åŸéšå»Ÿå»ºæ–¼æ¸…æœï¼Œæ˜¯å°ç£æœ€å…·è¦æ¨¡çš„åŸéšå»Ÿï¼Œè¦‹è­‰æ–°ç«¹ä¿¡ä»°èˆ‡åº¶æ°‘ç”Ÿæ´»ã€‚"
            },
            hsinchucounty: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="30" width="30" height="35" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,15 55,30 25,30" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="35" y="42" width="10" height="18" fill="#3E2723" opacity="0.3"/><line x1="25" y1="40" x2="55" y2="40" stroke="#3E2723" stroke-width="1.5"/><line x1="25" y1="50" x2="55" y2="50" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "åŒ—åŸ”æ…ˆå¤©å®®",
                story: "åŒ—åŸ”æ…ˆå¤©å®®ç‚ºå®¢å®¶èšè½ä¿¡ä»°ä¸­å¿ƒï¼Œè¦‹è­‰æ–°ç«¹ç¸£å®¢å®¶æ–‡åŒ–èˆ‡åœ°æ–¹å‡èšåŠ›ã€‚"
            },
            miaoli: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="22" y="35" width="36" height="28" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,20 56,35 24,35" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="32" y="45" width="7" height="13" fill="#D4A574"/><rect x="41" y="45" width="7" height="13" fill="#D4A574"/><line x1="22" y1="50" x2="58" y2="50" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "è‹—æ —ç«è»Šç«™èˆŠç«™",
                story: "è‹—æ —èˆŠç«è»Šç«™ç‚ºæ—¥æ²»æ™‚æœŸæœ¨é€ å»ºç¯‰ï¼Œè¦‹è­‰è‹—æ —äº¤é€šç™¼å±•èˆ‡åœ°æ–¹æ­·å²ã€‚"
            },
            taichung: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="22" y="32" width="36" height="33" fill="#D4A574" stroke="#3E2723" stroke-width="2"/><rect x="32" y="18" width="16" height="14" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="28" y="42" width="10" height="18" fill="#4A5D5E" opacity="0.4"/><rect x="42" y="42" width="10" height="18" fill="#4A5D5E" opacity="0.4"/><line x1="22" y1="48" x2="58" y2="48" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "å°ä¸­å·å»³",
                story: "å°ä¸­å·å»³å»ºæ–¼æ—¥æ²»æ™‚æœŸï¼Œæ˜¯å°ä¸­å¸‚æœ€å…·ä»£è¡¨æ€§çš„æ­·å²å»ºç¯‰ï¼Œè¦‹è­‰å°ä¸­ç¾ä»£åŒ–çš„èµ·é»ã€‚"
            },
            changhua: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><ellipse cx="40" cy="60" rx="28" ry="12" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="35" y="30" width="10" height="30" fill="#D4A574" stroke="#3E2723" stroke-width="2"/><circle cx="40" cy="25" r="8" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><circle cx="38" cy="23" r="2" fill="#3E2723"/><circle cx="42" cy="23" r="2" fill="#3E2723"/></svg>`,
                title: "å½°åŒ–å…«å¦å±±å¤§ä½›",
                story: "å…«å¦å±±å¤§ä½›ç‚ºå½°åŒ–åœ°æ¨™ï¼Œè¦‹è­‰åœ°æ–¹ä¿¡ä»°èˆ‡è§€å…‰ç™¼å±•ã€‚"
            },
            nantou: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="35" width="30" height="28" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,20 55,35 25,35" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="33" y="45" width="14" height="13" fill="#D4A574"/><line x1="25" y1="48" x2="55" y2="48" stroke="#3E2723" stroke-width="1.5"/><circle cx="40" cy="28" r="3" fill="#F5EBD8"/></svg>`,
                title: "é›†é›†è»Šç«™",
                story: "é›†é›†è»Šç«™ç‚ºæ—¥æ²»æ™‚æœŸæœ¨é€ è»Šç«™ï¼Œè¦‹è­‰å—æŠ•é›†é›†ç·šéµé“æ­·å²èˆ‡921é‡å»ºã€‚"
            },
            yunlin: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="20" y="35" width="40" height="30" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="40,15 60,35 20,35" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="35" y="45" width="10" height="15" fill="#D4A574"/><circle cx="28" cy="48" r="4" fill="#F5EBD8"/><circle cx="52" cy="48" r="4" fill="#F5EBD8"/></svg>`,
                title: "åŒ—æ¸¯æœå¤©å®®",
                story: "åŒ—æ¸¯æœå¤©å®®ç‚ºå°ç£åª½ç¥–ä¿¡ä»°é‡é®ï¼Œè¦‹è­‰é›²æ—å®—æ•™æ–‡åŒ–èˆ‡åœ°æ–¹ç¹æ¦®ã€‚"
            },
            chiayicity: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="22" y="30" width="36" height="35" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="28" y="40" width="8" height="15" fill="#3E2723" opacity="0.4"/><rect x="44" y="40" width="8" height="15" fill="#3E2723" opacity="0.4"/><line x1="22" y1="45" x2="58" y2="45" stroke="#3E2723" stroke-width="2"/><line x1="22" y1="55" x2="58" y2="55" stroke="#3E2723" stroke-width="2"/></svg>`,
                title: "å˜‰ç¾©èˆŠç›£ç„",
                story: "å˜‰ç¾©èˆŠç›£ç„ç‚ºæ—¥æ²»æ™‚æœŸç›£ç„å»ºç¯‰ï¼Œè¦‹è­‰å˜‰ç¾©å¸æ³•èˆ‡äººæ¬Šç™¼å±•ã€‚"
            },
            chiayicounty: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="38" width="30" height="27" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,22 55,38 25,38" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="33" y="48" width="6" height="12" fill="#D4A574"/><rect x="41" y="48" width="6" height="12" fill="#D4A574"/><line x1="25" y1="52" x2="55" y2="52" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "å¥®èµ·æ¹–è€è¡—",
                story: "å¥®èµ·æ¹–è€è¡—ç‚ºé˜¿é‡Œå±±éµé“ä¸­ç¹¼ç«™ï¼Œè¦‹è­‰å˜‰ç¾©ç¸£å±±åŸç”Ÿæ´»èˆ‡éµé“æ–‡åŒ–ã€‚"
            },
            tainan: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="18" y="40" width="44" height="25" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="20,40 40,18 60,40" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="30" y="48" width="8" height="12" fill="#D4A574"/><rect x="42" y="48" width="8" height="12" fill="#D4A574"/><circle cx="40" cy="30" r="4" fill="#F5EBD8"/></svg>`,
                title: "èµ¤å´æ¨“",
                story: "èµ¤å´æ¨“å»ºæ–¼è·æ²»æ™‚æœŸï¼Œæ­·ç¶“æ˜é„­ã€æ¸…æœï¼Œæ˜¯å°ç£æœ€å…·ä»£è¡¨æ€§çš„å¤è¹Ÿä¹‹ä¸€ï¼Œè¦‹è­‰å°å—å¤šå…ƒæ­·å²ã€‚"
            },
            kaohsiung: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="25" y="35" width="30" height="30" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="40,20 55,35 25,35" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="33" y="45" width="14" height="15" fill="#D4A574"/><ellipse cx="40" cy="68" rx="20" ry="8" fill="#6B9080" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "æ‰“ç‹—è‹±åœ‹é ˜äº‹é¤¨",
                story: "æ‰“ç‹—è‹±åœ‹é ˜äº‹é¤¨å»ºæ–¼19ä¸–ç´€ï¼Œæ˜¯å°ç£ç¾å­˜æœ€æ—©çš„è¥¿å¼å»ºç¯‰ä¹‹ä¸€ï¼Œä¿¯ç°é«˜é›„æ¸¯ï¼Œè¦‹è­‰å°ç£å°å¤–äº¤æµå²ã€‚"
            },
            pingtung: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="18" y="30" width="44" height="35" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="15" y="25" width="50" height="8" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="35" y="42" width="10" height="18" fill="#D4A574"/><line x1="18" y1="45" x2="62" y2="45" stroke="#3E2723" stroke-width="2"/></svg>`,
                title: "æ†æ˜¥å¤åŸ",
                story: "æ†æ˜¥å¤åŸç‚ºå°ç£ç¾å­˜æœ€å®Œæ•´çš„åŸç‰†ä¹‹ä¸€ï¼Œè¦‹è­‰å±æ±æ†æ˜¥åœ°å€çš„æ­·å²ç™¼å±•ã€‚"
            },
            hualien: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="24" y="32" width="32" height="33" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><polygon points="40,18 56,32 24,32" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><rect x="32" y="42" width="7" height="18" fill="#D4A574"/><rect x="41" y="42" width="7" height="18" fill="#D4A574"/><line x1="24" y1="48" x2="56" y2="48" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "æ¾åœ’åˆ¥é¤¨",
                story: "æ¾åœ’åˆ¥é¤¨ç‚ºæ—¥æ²»æ™‚æœŸè»äº‹æŒ‡æ®æ‰€ï¼Œè¦‹è­‰èŠ±è“®æˆ°çˆ­å²èˆ‡æ—¥å¼å»ºç¯‰ç¾å­¸ã€‚"
            },
            taitung: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><circle cx="40" cy="45" r="20" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="35" y="40" width="10" height="25" fill="#D4A574" stroke="#3E2723" stroke-width="2"/><circle cx="40" cy="35" r="8" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><ellipse cx="40" cy="68" rx="25" ry="8" fill="#6B9080" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "å‘å—éºå€å…¬åœ’",
                story: "å‘å—éºå€ç‚ºå°ç£å²å‰æ–‡åŒ–é‡é®ï¼Œè¦‹è­‰å°æ±åŸä½æ°‘æ—ç¾¤çš„æ­·å²ã€‚"
            },
            penghu: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="22" y="32" width="36" height="33" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="40,15 58,32 22,32" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="35" y="42" width="10" height="18" fill="#D4A574"/><ellipse cx="40" cy="68" rx="22" ry="8" fill="#6B9080" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "æ¾æ¹–å¤©åå®®",
                story: "æ¾æ¹–å¤©åå®®ç‚ºå°ç£æœ€æ—©çš„åª½ç¥–å»Ÿï¼Œè¦‹è­‰æ¾æ¹–æµ·æ´‹ä¿¡ä»°èˆ‡ç§»æ°‘æ­·å²ã€‚"
            },
            kinmen: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><rect x="20" y="30" width="40" height="35" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><polygon points="40,12 60,30 20,30" fill="#4A5D5E" stroke="#3E2723" stroke-width="2"/><rect x="30" y="40" width="8" height="20" fill="#D4A574"/><rect x="42" y="40" width="8" height="20" fill="#D4A574"/><circle cx="40" cy="22" r="5" fill="#F5EBD8" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "è’å…‰æ¨“",
                story: "è’å…‰æ¨“ç‚ºé‡‘é–€åœ°æ¨™ï¼Œè¦‹è­‰æˆ°åœ°æ”¿å‹™èˆ‡é–©å—å»ºç¯‰ä¹‹ç¾ã€‚"
            },
            lienchiang: {
                svg: `<svg width="80" height="80" viewBox="0 0 80 80"><ellipse cx="40" cy="60" rx="25" ry="10" fill="#8B6F47" stroke="#3E2723" stroke-width="2"/><rect x="35" y="25" width="10" height="35" fill="#F5EBD8" stroke="#3E2723" stroke-width="2"/><polygon points="40,15 45,25 35,25" fill="#B85C50" stroke="#3E2723" stroke-width="2"/><circle cx="40" cy="35" r="4" fill="#D4A574" stroke="#3E2723" stroke-width="1.5"/></svg>`,
                title: "æ±è’ç‡ˆå¡”",
                story: "æ±è’ç‡ˆå¡”ç‚ºé¦¬ç¥–é‡è¦èˆªæ¨™ï¼Œè¦‹è­‰é€£æ±Ÿç¸£æµ·æ´‹æ–‡åŒ–èˆ‡æˆ°åœ°æ­·å²ã€‚"
            }
        };

        function renderLandmark(city) {
            const landmark = cityLandmarks[city];
            const el = document.getElementById('cityLandmark');
            if (landmark) {
                el.innerHTML = `
                    <div style="background:var(--tw-cream);border-radius:20px;padding:16px;border:3px solid var(--tw-border);box-shadow:0 4px 12px rgba(62,39,35,0.1);display:flex;align-items:center;gap:18px;">
                        <div style="flex-shrink:0;">${landmark.svg}</div>
                        <div style="flex:1;">
                            <div style="font-weight:bold;font-size:1.15rem;color:var(--tw-brick);margin-bottom:4px;">${landmark.title}</div>
                            <div style="font-size:0.95rem;color:var(--tw-wood);line-height:1.5;">${landmark.story}</div>
                        </div>
                    </div>
                `;
            } else {
                el.innerHTML = '';
            }
        }
        // ç¸£å¸‚åç¨±å°ç…§è¡¨
        const cityNames = {
            keelung: "åŸºéš†å¸‚",
            taipei: "è‡ºåŒ—å¸‚",
            newtaipei: "æ–°åŒ—å¸‚",
            yilan: "å®œè˜­ç¸£",
            taoyuan: "æ¡ƒåœ’å¸‚",
            hsinchucity: "æ–°ç«¹å¸‚",
            hsinchucounty: "æ–°ç«¹ç¸£",
            miaoli: "è‹—æ —ç¸£",
            taichung: "è‡ºä¸­å¸‚",
            changhua: "å½°åŒ–ç¸£",
            nantou: "å—æŠ•ç¸£",
            yunlin: "é›²æ—ç¸£",
            chiayicity: "å˜‰ç¾©å¸‚",
            chiayicounty: "å˜‰ç¾©ç¸£",
            tainan: "è‡ºå—å¸‚",
            kaohsiung: "é«˜é›„å¸‚",
            pingtung: "å±æ±ç¸£",
            hualien: "èŠ±è“®ç¸£",
            taitung: "è‡ºæ±ç¸£",
            penghu: "æ¾æ¹–ç¸£",
            kinmen: "é‡‘é–€ç¸£",
            lienchiang: "é€£æ±Ÿç¸£"
        };

        let currentCity = "newtaipei";
        const API_BASE_URL = "https://weatherdunk.zeabur.app/api/weather/";

        function getApiUrl() {
            return API_BASE_URL + currentCity;
        }

        function getWeatherIcon(weather) {
            if (!weather) return "ğŸŒ¤ï¸";
            if (weather.includes("æ™´")) return "â˜€ï¸";
            if (weather.includes("å¤šé›²")) return "â›…";
            if (weather.includes("é™°")) return "â˜ï¸";
            if (weather.includes("é›¨")) return "ğŸŒ§ï¸";
            if (weather.includes("é›·")) return "â›ˆï¸";
            return "ğŸŒ¤ï¸";
        }

        function getAdvice(rainProb, maxTemp) {
            let rainIcon = "ğŸŒ‚";
            let rainText = "SAFE!ä¸ç”¨å¸¶å‚˜";
            if (parseInt(rainProb) > 30) {
                rainIcon = "â˜‚ï¸";
                rainText = "WARNING!è¨˜å¾—å¸¶å‚˜ï¼";
            }

            let clothIcon = "ğŸ‘•";
            let clothText = "éš¨ä¾¿æ€éº¼ç©¿éƒ½å¯ä»¥";
            if (parseInt(maxTemp) >= 28) {
                clothIcon = "ğŸ½";
                clothText = "çŸ­è¢–å‡ºé–€å³å¯";
            } else if (parseInt(maxTemp) <= 20) {
                clothIcon = "ğŸ§¥";
                clothText = "è¨˜å¾—åŠ ä»¶å¤–å¥—";
            }

            return { rainIcon, rainText, clothIcon, clothText };
        }

        function getTimePeriod(startTime) {
            const hour = new Date(startTime).getHours();
            if (hour >= 5 && hour < 11) return "æ—©æ™¨";
            if (hour >= 11 && hour < 14) return "ä¸­åˆ";
            if (hour >= 14 && hour < 18) return "ä¸‹åˆ";
            if (hour >= 18 && hour < 23) return "æ™šä¸Š";
            return "æ·±å¤œ";
        }

        function renderWeather(data) {
            const forecasts = data.forecasts;
            const current = forecasts[0];
            const others = forecasts.slice(1);

            // 1. æ¸²æŸ“ Hero Card (ä¸»ç•«é¢)
            const advice = getAdvice(current.rain, current.maxTemp);
            const period = getTimePeriod(current.startTime);
            const avgTemp = Math.round((parseInt(current.maxTemp) + parseInt(current.minTemp)) / 2);

            document.getElementById('heroCard').innerHTML = `
                        <div class="hero-card">
                            <div class="hero-period">${period}</div>
                            <div class="hero-temp-container">
                                <div class="hero-icon">${getWeatherIcon(current.weather)}</div>
                                <div class="hero-temp">${avgTemp}Â°</div>
                            </div>
                            <div class="hero-desc">${current.weather}</div>
                            
                            <div class="advice-grid">
                                <div class="advice-item">
                                    <div class="advice-icon">${advice.rainIcon}</div>
                                    <div class="advice-text">${advice.rainText}</div>
                                    <div style="font-size:0.7rem; color:#999">é™é›¨ç‡ ${current.rain}</div>
                                </div>
                                <div class="advice-item">
                                    <div class="advice-icon">${advice.clothIcon}</div>
                                    <div class="advice-text">${advice.clothText}</div>
                                    <div style="font-size:0.7rem; color:#999">æœ€é«˜æº« ${current.maxTemp}Â°</div>
                                </div>
                            </div>
                        </div>
                    `;

            // 2. æ¸²æŸ“ç¨å¾Œé å ± (åŒ…å«æ˜å¤©åˆ¤æ–·)
            const scrollContainer = document.getElementById('futureForecasts');
            scrollContainer.innerHTML = '';

            // æŠ“ä»Šå¤©çš„æ—¥æœŸæ•¸å­— (ä¾‹å¦‚ 24)
            const todayDate = new Date().getDate();

            others.forEach(f => {
                let p = getTimePeriod(f.startTime);

                // åˆ¤æ–·è©²é å ±çš„æ—¥æœŸæ˜¯å¦è·Ÿä»Šå¤©ä¸åŒï¼Œä¸åŒå°±æ˜¯æ˜å¤©
                const fDate = new Date(f.startTime);
                if (fDate.getDate() !== todayDate) {
                    p = "æ˜å¤©" + p;
                }

                scrollContainer.innerHTML += `
                            <div class="mini-card">
                                <div class="mini-time">${p}</div>
                                <div class="mini-icon">${getWeatherIcon(f.weather)}</div>
                                <div class="mini-temp">${f.minTemp}Â° - ${f.maxTemp}Â°</div>
                                <div style="font-size:0.8rem; color:#888; margin-top:5px;">ğŸ’§${f.rain}</div>
                            </div>
                        `;
            });

            // 3. å³ä¸Šè§’é¡¯ç¤ºä»Šæ—¥æ—¥æœŸ
            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const dayIndex = now.getDay();
            const days = ["é€±æ—¥", "é€±ä¸€", "é€±äºŒ", "é€±ä¸‰", "é€±å››", "é€±äº”", "é€±å…­"];

            document.getElementById('updateTime').textContent = `${month}æœˆ${date}æ—¥ ${days[dayIndex]}`;
        }

        async function fetchWeather() {
            renderLandmark(currentCity);
            try {
                // é¡¯ç¤º Loading ç•«é¢
                document.getElementById('loading').style.display = 'flex';
                document.getElementById('mainContent').style.display = 'none';

                // 1. å®šç¾©ã€Œæœ€ä½ç­‰å¾…æ™‚é–“ã€ï¼š1500 æ¯«ç§’ (1.5ç§’)
                const delayPromise = new Promise(resolve => setTimeout(resolve, 1500));

                // 2. å®šç¾©ã€ŒæŠ“å–è³‡æ–™ã€çš„å·¥ä½œ
                const fetchPromise = fetch(getApiUrl()).then(res => res.json());

                // 3. Promise.all æœƒç­‰å¾…ã€Œå…©å€‹éƒ½å®Œæˆã€æ‰æœƒå¾€ä¸‹èµ°
                // result é™£åˆ—è£¡ï¼Œç¬¬ä¸€å€‹æ˜¯ delay çš„çµæœ(æ²’ç”¨åˆ°)ï¼Œç¬¬äºŒå€‹æ˜¯ api çš„ json è³‡æ–™
                const [_, json] = await Promise.all([delayPromise, fetchPromise]);

                if (json.success) {
                    renderWeather(json.data);

                    // æ›´æ–°ä½ç½®é¡¯ç¤º
                    document.getElementById('locationDisplay').textContent = `ğŸ“ ${cityNames[currentCity]}`;

                    // è³‡æ–™è™•ç†å¥½å¾Œ,éš±è— Loadingï¼Œé¡¯ç¤ºä¸»ç•«é¢
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                } else {
                    throw new Error("API Error");
                }
            } catch (e) {
                console.error(e);
                alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼Œç‹¸å…‹æŠŠç¶²è·¯ç·šå’¬æ–·äº†ï¼");
                // ç™¼ç”ŸéŒ¯èª¤æ™‚ä¹Ÿè¦éš±è— loading
                document.getElementById('loading').style.display = 'none';
            }
        }

        // ç›£è½ç¸£å¸‚é¸å–®è®ŠåŒ–
        document.getElementById('citySelector').addEventListener('change', function (e) {
            currentCity = e.target.value;
            renderLandmark(currentCity);
            fetchWeather();
        });

        document.addEventListener("DOMContentLoaded", function () {
            renderLandmark(currentCity);
            fetchWeather();
        });
    </script>
</body>

</html>